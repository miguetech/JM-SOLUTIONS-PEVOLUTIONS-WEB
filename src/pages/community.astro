---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar';
import CommunityHub from '../components/Community';
import Footer from '../components/Footer';
import { ServerInfo, TopPlayers } from '../components/Sidebar';
import { getLangFromUrl } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
---

<Layout title="Community Hub - PEvolutions">
	<Navbar client:load lang={lang as 'en' | 'es' | 'pt'} />
	
	<main class="max-w-7xl mx-auto px-6 py-12">
		<div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
			{/* Right Column: Sidebar (First on mobile) */}
			<aside class="lg:col-span-4 lg:order-2 flex flex-col gap-y-10">
				<div><ServerInfo client:load lang={lang as 'en' | 'es' | 'pt'} /></div>
				<div><TopPlayers client:visible lang={lang as 'en' | 'es' | 'pt'} /></div>
			</aside>

			{/* Left Column: Community Content */}
			<div class="lg:col-span-8 lg:order-1">
				<CommunityHub client:load lang={lang as 'en' | 'es' | 'pt'} />
			</div>
		</div>
	</main>

	<Footer client:visible />
</Layout>
