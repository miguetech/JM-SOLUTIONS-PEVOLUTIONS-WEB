---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar';
import Hero from '../components/Hero';
import { LoginBox, TopPlayers, ServerInfo } from '../components/Sidebar';
import Footer from '../components/Footer';
import { getLangFromUrl } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
---

<Layout title="PEvolutions - PokÃ©mon Online Game">
	<Navbar client:load lang={lang} />
	
	<main class="max-w-7xl mx-auto px-6 py-12">
		<div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
			{/* Right Column: Sidebar (Appears first on mobile) */}
			<aside class="lg:col-span-4 lg:order-2 flex flex-col gap-y-10">
				<div><LoginBox client:load lang={lang as 'en' | 'es' | 'pt'} /></div>
				<div><TopPlayers client:visible lang={lang as 'en' | 'es' | 'pt'} /></div>
				<div><ServerInfo client:load lang={lang as 'en' | 'es' | 'pt'} /></div>
			</aside>

			{/* Left Column: Hero/News */}
			<div class="lg:col-span-8 lg:order-1 space-y-8">
				<Hero client:visible lang={lang as 'en' | 'es' | 'pt'} />
			</div>
		</div>
	</main>

	<Footer client:visible lang={lang as 'en' | 'es' | 'pt'} />
</Layout>
